CREATE ROLE insurancecontract_user LOGIN PASSWORD 'ToC5N1AXnK4VUz';
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO insurancecontract_user;

CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

DROP TABLE IF EXISTS contract CASCADE;
CREATE TABLE contract(
    id UUID NOT NULL DEFAULT uuid_generate_v4() PRIMARY KEY,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),
    name TEXT NOT NULL
);

DROP TABLE IF EXISTS client_contract CASCADE;
CREATE TABLE client_contract(
    id UUID NOT NULL DEFAULT uuid_generate_v4() PRIMARY KEY,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),
    client_id UUID NOT NULL,
    contract_id UUID NOT NULL,
    CONSTRAINT fk_contract_id FOREIGN KEY(contract_id) REFERENCES contract(id) ON UPDATE CASCADE ON DELETE CASCADE
);

TRUNCATE contract CASCADE;
INSERT INTO contract(id, name) VALUES
('11130ac1-3358-4848-a693-3585d00c26d1', 'Vitalife - Life insurance'),
('ebaf9038-5eb6-4b84-b7bf-eee262281f00', 'Casavida - House insurance'),
('1198b380-74d9-486e-90c8-550ba0f99945', 'Motordrop - Car insurance');

TRUNCATE client_contract CASCADE ;
INSERT INTO client_contract(client_id, contract_id) VALUES
('be57a327-c93b-41c7-97dd-64190bfe1a23', '11130ac1-3358-4848-a693-3585d00c26d1'),
('b220d2e7-0ee2-40f2-9e6d-06254af8dfa4', '11130ac1-3358-4848-a693-3585d00c26d1'),
('852d7a4c-fae2-4a2b-9a45-5d1b60e48c5f', '11130ac1-3358-4848-a693-3585d00c26d1'),
('eaa03426-0dea-484b-8a44-d90771fdb817', '11130ac1-3358-4848-a693-3585d00c26d1'),
('0c089950-f330-497d-996f-025f21eb84db', '11130ac1-3358-4848-a693-3585d00c26d1'),
('b8ee66a3-9930-40e5-a926-680397a18084', '11130ac1-3358-4848-a693-3585d00c26d1'),
('b8ee66a3-9930-40e5-a926-680397a18084', '1198b380-74d9-486e-90c8-550ba0f99945'),
('92e1fc38-de81-425b-ad92-7bf333a423d8', '11130ac1-3358-4848-a693-3585d00c26d1'),
('eeaf7ff5-90ac-46e1-a9c4-ef53c45a923b', '11130ac1-3358-4848-a693-3585d00c26d1'),
('2a68e062-823b-4994-a2a7-4cabec99ee72', '11130ac1-3358-4848-a693-3585d00c26d1'),
('3ecab9d3-51d9-4e60-aea2-959df858453d', '11130ac1-3358-4848-a693-3585d00c26d1'),
('f1e94b18-8490-4040-ac85-6e1437f5d372', '11130ac1-3358-4848-a693-3585d00c26d1'),
('f1e94b18-8490-4040-ac85-6e1437f5d372', 'ebaf9038-5eb6-4b84-b7bf-eee262281f00'),
('f1e94b18-8490-4040-ac85-6e1437f5d372', '1198b380-74d9-486e-90c8-550ba0f99945'),
('f8e33ff2-c977-47f9-a16d-7ceca6f825cb', '11130ac1-3358-4848-a693-3585d00c26d1'),
('5eca8820-b69a-4c35-be4a-0077cc5b3add', '11130ac1-3358-4848-a693-3585d00c26d1'),
('3bdd0261-6b28-442d-9430-5f8197642162', '11130ac1-3358-4848-a693-3585d00c26d1'),
('849a5fc8-309f-4564-b7b2-717bb62658e6', 'ebaf9038-5eb6-4b84-b7bf-eee262281f00'),
('6a4616d5-69c5-4747-b40f-825532e6ffa1', 'ebaf9038-5eb6-4b84-b7bf-eee262281f00'),
('c5e0e1c8-aea1-4cae-aef9-98175640d33b', 'ebaf9038-5eb6-4b84-b7bf-eee262281f00'),
('5e468304-e635-4e73-a603-fc2e79829338', 'ebaf9038-5eb6-4b84-b7bf-eee262281f00');